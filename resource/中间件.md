# 1.Zookeeper

## 简单的功能（Znode+监听）：

1.统一命名管理：多个计算机IP合成一个域名，通过域名即可访问

2.统一配置管理：多个系统合用一个配置文件，挂在znode上。（监听！）

3.分布式锁：访问节点时创建临时的节点，临时节点id最小的可以访问。（监听！）



# 2.Redis

## 1.持久化

RDB和AOF

RDB:单独fork一个线程，隔一段时间就把内存中数据以快照形式保存到磁盘的二进制文件。

AOF：默认情况下每秒钟都将新的写指令都记录到文件最后，数据恢复时就只需要重新执行这个文件。（体积大、速度慢）

默认是AOF

## 2.缓存穿透、缓存击穿、缓存雪崩区别和解决方案

**穿透： 缓存穿透是指缓存和数据库中都没有的数据，而用户不断发起请求，如发起为id为“-1”的数据或id为特别大不存在的数据。这时的用户很可能是攻击者，攻击会导致数据库压力过大。**

方案：接口层增加校验。

  **缓存击穿：是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力**

 **缓存雪崩：是指缓存中数据大批量到过期时间，而查询数据量巨大，引起数据库压力过大甚至down机。和缓存击穿不同的是，    缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查数据库。**

## 3.redis的过期策略以及内存淘汰机制

**采用了定期删除和惰性删除的策略**

每隔100ms随机抽取key进行检查是否过期，过期则删除，而惰性删除则是在每次读取缓存之前，先判断缓存是否过期。但这两种方案也可能会存在漏网之鱼，于是会导致越积越多，于是就要配置redis.conf里的参数

```
maxmemory-policy volatile-lru；
```

